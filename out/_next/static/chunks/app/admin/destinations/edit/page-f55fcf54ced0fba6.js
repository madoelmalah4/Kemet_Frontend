(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4489],{82252:function(e,s,r){Promise.resolve().then(r.bind(r,20480))},20480:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return W}});var i=r(57437),t=r(99376),n=r(2265),a=r(79405),l=r(15863),c=r(32660),d=r(95252),o=r(91723),m=r(83229),x=r(29501),h=r(13590),j=r(67119),u=r(62869),p=r(95186),g=r(76818),f=r(66070),N=r(15681),y=r(77992),b=r(27648),v=r(37775);let I=j.Ry({name:j.Z_().min(2,"Name must be at least 2 characters"),city:j.Z_().min(2,"City must be at least 2 characters"),description:j.Z_().min(10,"Description must be at least 10 characters"),imageUrl:j.Z_().url("Please enter a valid image URL"),vrUrlImage:j.Z_().optional().or(j.i0("")),estimatedPrice:j.oQ.number().min(0,"Price must be at least 0"),fromWorkingHours:j.Z_().min(5,"Format: HH:mm:ss"),endWorkingHours:j.Z_().min(5,"Format: HH:mm:ss")});function w(e){let{destinationId:s}=e,r=(0,t.useRouter)(),{toast:j}=(0,y.pm)(),{data:w,isLoading:U}=(0,v.t$)(s),[W,{isLoading:k}]=(0,v.aZ)(),Z=(0,x.cI)({resolver:(0,h.F)(I),defaultValues:{name:"",city:"",description:"",imageUrl:"",vrUrlImage:"",estimatedPrice:0,fromWorkingHours:"09:00:00",endWorkingHours:"18:00:00"}});(0,n.useEffect)(()=>{w&&Z.reset({name:w.name,city:w.city,description:w.description,imageUrl:w.imageUrl,vrUrlImage:w.vrUrlImage||"",estimatedPrice:w.estimatedPrice||0,fromWorkingHours:w.fromWorkingHours||"09:00:00",endWorkingHours:w.endWorkingHours||"18:00:00"})},[w,Z]);let H=async e=>{try{await W({id:s,data:{...e,vrUrlImage:e.vrUrlImage||""}}).unwrap(),j({title:"Success",description:"Destination updated successfully"}),r.push("/admin/destinations")}catch(e){j({title:"Error",description:"Failed to update destination",variant:"destructive"})}};return U?(0,i.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,i.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-egyptian-gold"})}):(0,i.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(b.default,{href:"/admin/destinations",children:(0,i.jsx)(u.z,{variant:"ghost",size:"icon",children:(0,i.jsx)(c.Z,{className:"w-5 h-5"})})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-display font-bold text-gray-900",children:"Edit Destination"}),(0,i.jsx)("p",{className:"text-gray-500",children:"Update destination details"})]})]}),(0,i.jsxs)(f.Zb,{className:"border-none shadow-sm bg-white/80 backdrop-blur-sm max-w-2xl",children:[(0,i.jsx)(f.Ol,{children:(0,i.jsx)(f.ll,{children:"Destination Details"})}),(0,i.jsx)(f.aY,{children:(0,i.jsx)(N.l0,{...Z,children:(0,i.jsxs)("form",{onSubmit:Z.handleSubmit(H),className:"space-y-6",children:[(0,i.jsx)(N.Wi,{control:Z.control,name:"name",render:e=>{let{field:s}=e;return(0,i.jsxs)(N.xJ,{children:[(0,i.jsx)(N.lX,{children:"Name"}),(0,i.jsx)(N.NI,{children:(0,i.jsx)(p.I,{placeholder:"e.g. Pyramids of Giza",...s})}),(0,i.jsx)(N.zG,{})]})}}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(N.Wi,{control:Z.control,name:"city",render:e=>{let{field:s}=e;return(0,i.jsxs)(N.xJ,{children:[(0,i.jsx)(N.lX,{children:"City"}),(0,i.jsx)(N.NI,{children:(0,i.jsx)(p.I,{placeholder:"e.g. Cairo",...s})}),(0,i.jsx)(N.zG,{})]})}}),(0,i.jsx)(N.Wi,{control:Z.control,name:"estimatedPrice",render:e=>{let{field:s}=e;return(0,i.jsxs)(N.xJ,{children:[(0,i.jsxs)(N.lX,{className:"flex items-center gap-2",children:[(0,i.jsx)(d.Z,{className:"w-4 h-4"})," Estimated Price"]}),(0,i.jsx)(N.NI,{children:(0,i.jsx)(p.I,{type:"number",step:"0.01",placeholder:"0.00",...s})}),(0,i.jsx)(N.zG,{})]})}})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsx)(N.Wi,{control:Z.control,name:"fromWorkingHours",render:e=>{let{field:s}=e;return(0,i.jsxs)(N.xJ,{children:[(0,i.jsxs)(N.lX,{className:"flex items-center gap-2",children:[(0,i.jsx)(o.Z,{className:"w-4 h-4"})," Opens At"]}),(0,i.jsx)(N.NI,{children:(0,i.jsx)(p.I,{placeholder:"09:00:00",...s})}),(0,i.jsx)(N.zG,{})]})}}),(0,i.jsx)(N.Wi,{control:Z.control,name:"endWorkingHours",render:e=>{let{field:s}=e;return(0,i.jsxs)(N.xJ,{children:[(0,i.jsxs)(N.lX,{className:"flex items-center gap-2",children:[(0,i.jsx)(o.Z,{className:"w-4 h-4"})," Closes At"]}),(0,i.jsx)(N.NI,{children:(0,i.jsx)(p.I,{placeholder:"18:00:00",...s})}),(0,i.jsx)(N.zG,{})]})}})]}),(0,i.jsx)(N.Wi,{control:Z.control,name:"imageUrl",render:e=>{let{field:s}=e;return(0,i.jsxs)(N.xJ,{children:[(0,i.jsx)(N.lX,{children:"Image URL"}),(0,i.jsx)(N.NI,{children:(0,i.jsx)(p.I,{placeholder:"https://...",...s})}),(0,i.jsx)(N.zG,{})]})}}),(0,i.jsx)(N.Wi,{control:Z.control,name:"vrUrlImage",render:e=>{let{field:s}=e;return(0,i.jsxs)(N.xJ,{children:[(0,i.jsx)(N.lX,{children:"VR Tour URL (Optional)"}),(0,i.jsx)(N.NI,{children:(0,i.jsx)(p.I,{placeholder:"https://...",...s})}),(0,i.jsx)(N.zG,{})]})}}),(0,i.jsx)(N.Wi,{control:Z.control,name:"description",render:e=>{let{field:s}=e;return(0,i.jsxs)(N.xJ,{children:[(0,i.jsx)(N.lX,{children:"Description"}),(0,i.jsx)(N.NI,{children:(0,i.jsx)(g.g,{placeholder:"Provide a detailed description...",className:"min-h-[150px]",...s})}),(0,i.jsx)(N.zG,{})]})}}),(0,i.jsx)("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-800",children:(0,i.jsx)(u.z,{type:"submit",disabled:k,className:"relative px-6 py-2.5 rounded-xl font-medium text-white    bg-gradient-to-r from-egyptian-nile to-blue-600    hover:from-blue-600 hover:to-egyptian-nile   transition-all duration-300 shadow-md hover:shadow-lg    disabled:opacity-60 disabled:cursor-not-allowed",children:k?(0,i.jsxs)("span",{className:"flex items-center gap-2",children:[(0,i.jsx)(l.Z,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):(0,i.jsxs)("span",{className:"flex items-center gap-2",children:[(0,i.jsx)(m.Z,{className:"w-4 h-4"}),"Update Destination"]})})})]})})})]})]})}function U(){let e=(0,t.useSearchParams)().get("id");return e?(0,i.jsx)(w,{destinationId:e}):(0,i.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,i.jsx)("p",{className:"text-red-500 font-semibold",children:"Error: No destination ID provided."})})}function W(){return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,i.jsx)(l.Z,{className:"w-8 h-8 animate-spin text-blue-600"})}),children:(0,i.jsx)(U,{})})}}},function(e){e.O(0,[6137,7210,5650,3557,5610,7520,2971,2117,1744],function(){return e(e.s=82252)}),_N_E=e.O()}]);