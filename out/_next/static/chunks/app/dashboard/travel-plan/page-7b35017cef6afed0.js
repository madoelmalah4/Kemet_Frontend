(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7626],{24772:function(e,t,r){Promise.resolve().then(r.bind(r,49809))},49809:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var a=r(57437),n=r(86726),l=r(62869),o=r(27648),s=r(79405),i=r(31047),d=r(32660),c=r(39763);let u=(0,c.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),m=(0,c.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),h=(0,c.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var f=r(52048),p=r(83774),x=r(66070),g=r(35974);function v(){let{travelPlan:e}=(0,n.H)();return e?(0,a.jsxs)("div",{className:"max-w-5xl mx-auto pb-12",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o.default,{href:"/dashboard",className:"text-sm text-gray-500 hover:text-gray-900 flex items-center mb-2",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 mr-1"})," Back to Dashboard"]}),(0,a.jsx)("h1",{className:"font-display text-4xl font-bold text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-gray-500 text-sm",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-1"})," ",new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[e.days.length," Days"]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(l.z,{variant:"outline",size:"sm",className:"hidden sm:flex",children:[(0,a.jsx)(u,{className:"w-4 h-4 mr-2"})," Share"]}),(0,a.jsxs)(l.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-2"})," Export"]}),(0,a.jsx)(o.default,{href:"/dashboard/preferences",children:(0,a.jsxs)(l.z,{className:"bg-egyptian-nile text-white hover:bg-egyptian-nile/90",children:[(0,a.jsx)(h,{className:"w-4 h-4 mr-2"})," Edit Preferences"]})})]})]}),(0,a.jsxs)("div",{className:"space-y-8 relative",children:[(0,a.jsx)("div",{className:"absolute left-4 md:left-8 top-4 bottom-4 w-0.5 bg-gray-200 hidden md:block"}),e.days.map((e,t)=>(0,a.jsxs)(s.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1*t},className:"relative pl-0 md:pl-20",children:[(0,a.jsxs)("div",{className:"absolute left-0 w-16 h-16 bg-white border-2 border-egyptian-gold rounded-full flex flex-col items-center justify-center z-10 hidden md:flex shadow-sm",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Day"}),(0,a.jsx)("span",{className:"text-xl font-bold text-egyptian-nile",children:e.dayNumber})]}),(0,a.jsxs)("div",{className:"flex md:hidden items-center gap-2 mb-4",children:[(0,a.jsxs)("span",{className:"bg-egyptian-gold text-white px-3 py-1 rounded-lg text-sm font-bold",children:["Day ",e.dayNumber]}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(e.date).toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[e.activities.map((e,t)=>(0,a.jsx)(x.Zb,{className:"border-none shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden bg-white group",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,a.jsxs)("div",{className:"w-full md:w-32 bg-gray-50 p-4 md:p-6 flex flex-row md:flex-col items-center md:justify-center gap-2 border-b md:border-b-0 md:border-r border-gray-100",children:[(0,a.jsx)(f.Z,{className:"w-8 h-8 text-gray-600"}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-600",children:e.startTime}),(0,a.jsx)("div",{className:"h-px w-4 bg-gray-300 hidden md:block"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.endTime})]}),(0,a.jsxs)("div",{className:"p-4 md:p-6 flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-bold text-lg text-gray-900 mb-1 group-hover:text-egyptian-terracotta transition-colors",children:["Visit ",e.destinationId]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)(p.Z,{className:"w-3.5 h-3.5 mr-1"}),(0,a.jsx)("span",{children:"Cairo, Egypt"})]})]}),(0,a.jsx)(g.C,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-100 border-none",children:"Activity"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Enjoy a guided tour of the Great Pyramids of Giza, the last surviving wonder of the ancient world."})]})]})},e.id)),e.accommodation&&(0,a.jsx)(x.Zb,{className:"bg-amber-50/50 border-amber-100 border shadow-none",children:(0,a.jsxs)(x.aY,{className:"p-4 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-amber-600 text-lg",children:"\uD83D\uDECF️"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-amber-800 uppercase tracking-wide",children:"Accommodation"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.accommodation.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.accommodation.location})]})]})})]})]},e.dayNumber))]})]}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-3xl shadow-xl max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(i.Z,{className:"w-10 h-10 text-gray-300"})}),(0,a.jsx)("h1",{className:"font-display text-2xl font-bold mb-3 text-gray-900",children:"No Travel Plan Yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-8 leading-relaxed",children:"You haven't created a travel itinerary yet. Let our AI help you plan the perfect Egyptian adventure."}),(0,a.jsx)(o.default,{href:"/dashboard/trip-planner",children:(0,a.jsx)(l.z,{size:"lg",className:"w-full bg-gray-800 hover:bg-gray-900",children:"Create New Plan"})})]})})}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(57437),n=r(2265),l=r(94508);let o=n.forwardRef((e,t)=>{let{className:r,variant:n="default",...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border border-input"}[n],r),...o})});o.displayName="Badge"},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return i},z:function(){return d}});var a=r(57437),n=r(2265),l=r(37053),o=r(90535),s=r(94508);let i=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md shadow-primary/15",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input/70 bg-background/70 backdrop-blur hover:bg-accent/70 hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent/70 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"gradient-egyptian text-white hover:opacity-90 shadow-md transition-opacity"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,a.jsx)(u,{className:(0,s.cn)(i({variant:n,size:o,className:r})),ref:t,...c})});d.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return s},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},ll:function(){return i}});var a=r(57437),n=r(2265),l=r(94508);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-3xl border border-border/60 bg-card/80 backdrop-blur-sm text-card-foreground shadow-sm hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300",r),...n})});o.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...n})});s.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},86726:function(e,t,r){"use strict";r.d(t,{TravelPlanProvider:function(){return i},H:function(){return d}});var a=r(57437),n=r(2265);let l=[{id:"tp1",userId:"1",name:"Cairo Adventure",destination:"Cairo",startDate:"2024-05-01",endDate:"2024-05-07",budget:2e3,preferences:{interests:["History","Food"],pace:"moderate",accommodation:"hotel",transportation:"private"},days:[],status:"draft",createdAt:"2024-04-01T10:00:00Z",updatedAt:"2024-04-01T10:00:00Z"}];var o=r(10543);let s=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[d,c]=(0,n.useState)(l[0]||null),[u,{isLoading:m}]=(0,o.JV)(),h=async e=>{try{let t=await u(e).unwrap();c(t),console.log("Travel plan created:",t)}catch(e){console.error("Failed to create travel plan:",e)}};return(0,a.jsx)(s.Provider,{value:{travelPlan:d,preferences:r,setPreferences:e=>{i(e),console.log("Preferences saved:",e)},updateTravelPlan:e=>{c(e),console.log("Travel plan updated:",e)},createTravelPlan:h},children:t})}function d(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useTravelPlanContext must be used within a TravelPlanProvider");return e}},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return l}});var a=r(61994),n=r(53335);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},32660:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},83774:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},52048:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]])},72218:function(e,t,r){"use strict";r.d(t,{Cd:function(){return d},Dj:function(){return c},K4:function(){return o},av:function(){return m},sT:function(){return s},vJ:function(){return u},vN:function(){return h}});var a=r(39129);let n={user:(e=>{try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return null}})("user"),token:localStorage.getItem("token"),refreshToken:localStorage.getItem("refreshToken"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,error:null},l=(0,a.oM)({name:"auth",initialState:n,reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null},logout:e=>{e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("user")},tokenRefreshed:(e,t)=>{let{token:r,refreshToken:a,expiresIn:n}=t.payload;if(e.token=r,e.refreshToken=a,e.isAuthenticated=!0,localStorage.setItem("token",r),localStorage.setItem("refreshToken",a),n){let e=Date.now()+1e3*n;localStorage.setItem("tokenExpiry",e.toString())}},setCredentials:(e,t)=>{let{user:r,token:a,refreshToken:n,expiresIn:l}=t.payload;if(e.user=r,e.token=a,e.refreshToken=n,e.isAuthenticated=!0,e.error=null,e.isLoading=!1,localStorage.setItem("token",a),localStorage.setItem("refreshToken",n),localStorage.setItem("user",JSON.stringify(r)),l){let e=Date.now()+1e3*l;localStorage.setItem("tokenExpiry",e.toString())}},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,localStorage.setItem("user",JSON.stringify(t.payload))}}}),{setLoading:o,setError:s,clearError:i,logout:d,setCredentials:c,tokenRefreshed:u,setUser:m}=l.actions;t.ZP=l.reducer;let h=e=>e.auth.isAuthenticated},38059:function(e,t,r){"use strict";r.d(t,{h:function(){return h}});var a=r(79523),n=r(23557),l=r(72218);let o=e=>{try{return window.localStorage.getItem(e)}catch(e){return null}},s=(e,t)=>{try{window.localStorage.setItem(e,t)}catch(e){}},i=e=>{try{window.localStorage.removeItem(e)}catch(e){}},d=()=>{let e=o("tokenExpiry");return!e||Date.now()>=parseInt(e,10)},c=()=>{let e=o("tokenExpiry");if(!e)return!1;let t=Date.now();return parseInt(e,10)-t<3e5},u=(0,a.ni)({baseUrl:"https://kemeteg.runasp.net/api",prepareHeaders:(e,t)=>{var r,a;let{getState:n}=t,l=(null===(a=n())||void 0===a?void 0:null===(r=a.auth)||void 0===r?void 0:r.token)||o("token");return l&&e.set("authorization","Bearer ".concat(l)),e.set("content-type","application/json"),e}}),m=async(e,t,r)=>{if(c()){console.log("Token expiring soon, refreshing proactively...");let e=o("refreshToken");if(e){let a=await u({url:"/Auth/refresh",method:"POST",body:{refreshToken:e}},t,r);if(a.data){let r=a.data,n=(null==r?void 0:r.data)||r,o=null==n?void 0:n.accessToken,i=null==n?void 0:n.refreshToken,d=(null==n?void 0:n.expiresIn)||3600;o&&(s("token",o),i&&s("refreshToken",i),s("tokenExpiry",(Date.now()+1e3*d).toString()),t.dispatch((0,l.vJ)({token:o,refreshToken:i||e,expiresIn:d})),console.log("Token refreshed successfully"))}}}let a=await u(e,t,r);if(a.error&&401===a.error.status){console.log("Unauthorized (401), attempting to refresh token...");let n=o("refreshToken");if(n&&!d()){let o=await u({url:"/Auth/refresh",method:"POST",body:{refreshToken:n}},t,r);if(o.data){let i=o.data,d=(null==i?void 0:i.data)||i,c=null==d?void 0:d.accessToken,m=null==d?void 0:d.refreshToken,h=(null==d?void 0:d.expiresIn)||3600;c&&(s("token",c),m&&s("refreshToken",m),s("tokenExpiry",(Date.now()+1e3*h).toString()),t.dispatch((0,l.vJ)({token:c,refreshToken:m||n,expiresIn:h})),a=await u(e,t,r),console.log("Token refreshed and request retried"))}else console.log("Token refresh failed, logging out..."),i("token"),i("refreshToken"),i("tokenExpiry"),t.dispatch((0,l.Cd)()),window.location.href="/login"}else console.log("No valid refresh token, logging out..."),i("token"),i("refreshToken"),i("tokenExpiry"),t.dispatch((0,l.Cd)()),window.location.href="/login"}return a},h=(0,n.LC)({reducerPath:"api",baseQuery:m,tagTypes:["User","Auth","TravelPlan","Destination","Analytics","Booking","Review","Preference","Notification","Favorites"],endpoints:()=>({})})},10543:function(e,t,r){"use strict";r.d(t,{JV:function(){return i}});var a=r(38059),n=r(39129);let l=a.h.injectEndpoints({endpoints:e=>({getTravelPlans:e.query({query:()=>"/travel-plans",providesTags:["TravelPlan"]}),getTravelPlan:e.query({query:e=>"/travel-plans/".concat(e),providesTags:(e,t,r)=>[{type:"TravelPlan",id:r}]}),createTravelPlan:e.mutation({query:e=>({url:"/travel-plans",method:"POST",body:e}),invalidatesTags:["TravelPlan"]}),updateTravelPlan:e.mutation({query:e=>{let{id:t,data:r}=e;return{url:"/travel-plans/".concat(t),method:"PUT",body:r}},invalidatesTags:(e,t,r)=>{let{id:a}=r;return[{type:"TravelPlan",id:a}]}}),deleteTravelPlan:e.mutation({query:e=>({url:"/travel-plans/".concat(e),method:"DELETE"}),invalidatesTags:["TravelPlan"]}),addActivity:e.mutation({query:e=>{let{planId:t,dayId:r,activity:a}=e;return{url:"/travel-plans/".concat(t,"/days/").concat(r,"/activities"),method:"POST",body:a}},invalidatesTags:(e,t,r)=>{let{planId:a}=r;return[{type:"TravelPlan",id:a}]}}),updateActivity:e.mutation({query:e=>{let{planId:t,dayId:r,activityId:a,data:n}=e;return{url:"/travel-plans/".concat(t,"/days/").concat(r,"/activities/").concat(a),method:"PUT",body:n}},invalidatesTags:(e,t,r)=>{let{planId:a}=r;return[{type:"TravelPlan",id:a}]}}),deleteActivity:e.mutation({query:e=>{let{planId:t,dayId:r,activityId:a}=e;return{url:"/travel-plans/".concat(t,"/days/").concat(r,"/activities/").concat(a),method:"DELETE"}},invalidatesTags:(e,t,r)=>{let{planId:a}=r;return[{type:"TravelPlan",id:a}]}}),generateTravelPlan:e.mutation({query:e=>({url:"/travel-plans/generate",method:"POST",body:e}),invalidatesTags:["TravelPlan"]}),getTravelSuggestions:e.query({query:e=>{let{preferences:t}=e;return{url:"/travel-plans/suggestions",method:"POST",body:t}}}),exportTravelPlan:e.mutation({query:e=>{let{id:t,format:r}=e;return{url:"/travel-plans/".concat(t,"/export?format=").concat(r),method:"GET",responseHandler:e=>e.blob()}}}),shareTravelPlan:e.mutation({query:e=>{let{id:t,permissions:r}=e;return{url:"/travel-plans/".concat(t,"/share"),method:"POST",body:{permissions:r}}}}),duplicateTravelPlan:e.mutation({query:e=>({url:"/travel-plans/".concat(e,"/duplicate"),method:"POST"}),invalidatesTags:["TravelPlan"]})})}),{useGetTravelPlansQuery:o,useGetTravelPlanQuery:s,useCreateTravelPlanMutation:i,useUpdateTravelPlanMutation:d,useDeleteTravelPlanMutation:c,useAddActivityMutation:u,useUpdateActivityMutation:m,useDeleteActivityMutation:h,useGenerateTravelPlanMutation:f,useGetTravelSuggestionsQuery:p,useExportTravelPlanMutation:x,useShareTravelPlanMutation:g,useDuplicateTravelPlanMutation:v}=l,y=(0,n.oM)({name:"travelPlan",initialState:{plans:[],currentPlan:null,isLoading:!1,error:null},reducers:{setCurrentPlan:(e,t)=>{e.currentPlan=t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null},addPlan:(e,t)=>{e.plans.push(t.payload)},updatePlan:(e,t)=>{var r;let a=e.plans.findIndex(e=>e.id===t.payload.id);-1!==a&&(e.plans[a]=t.payload),(null===(r=e.currentPlan)||void 0===r?void 0:r.id)===t.payload.id&&(e.currentPlan=t.payload)},removePlan:(e,t)=>{var r;e.plans=e.plans.filter(e=>e.id!==t.payload),(null===(r=e.currentPlan)||void 0===r?void 0:r.id)===t.payload&&(e.currentPlan=null)}},extraReducers:e=>{e.addMatcher(l.endpoints.getTravelPlans.matchPending,e=>{e.isLoading=!0,e.error=null}).addMatcher(l.endpoints.getTravelPlans.matchFulfilled,(e,t)=>{e.isLoading=!1,e.plans=t.payload}).addMatcher(l.endpoints.getTravelPlans.matchRejected,(e,t)=>{var r;e.isLoading=!1,e.error=(null===(r=t.error)||void 0===r?void 0:r.message)||"Failed to fetch travel plans"}).addMatcher(l.endpoints.getTravelPlan.matchFulfilled,(e,t)=>{e.currentPlan=t.payload}).addMatcher(l.endpoints.createTravelPlan.matchFulfilled,(e,t)=>{e.plans.push(t.payload),e.currentPlan=t.payload}).addMatcher(l.endpoints.updateTravelPlan.matchFulfilled,(e,t)=>{y.caseReducers.updatePlan(e,t)}).addMatcher(l.endpoints.deleteTravelPlan.matchFulfilled,(e,t)=>{var r;let a=t.meta.arg.originalArgs;e.plans=e.plans.filter(e=>e.id!==a),(null===(r=e.currentPlan)||void 0===r?void 0:r.id)===a&&(e.currentPlan=null)})}}),{setCurrentPlan:b,setLoading:k,setError:w,clearError:T,addPlan:j,updatePlan:N,removePlan:P}=y.actions;t.ZP=y.reducer}},function(e){e.O(0,[6137,7210,5650,3557,2971,2117,1744],function(){return e(e.s=24772)}),_N_E=e.O()}]);