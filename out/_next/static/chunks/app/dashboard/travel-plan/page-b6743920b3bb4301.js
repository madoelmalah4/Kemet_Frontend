(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7626],{24772:function(e,t,r){Promise.resolve().then(r.bind(r,49809))},49809:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(57437),a=r(86726),s=r(62869),o=r(27648),i=r(79405),l=r(31047),d=r(32660),c=r(39763);let u=(0,c.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),m=(0,c.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),x=(0,c.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var h=r(52048),f=r(83774),g=r(66070),y=r(35974);function p(){let{travelPlan:e}=(0,a.H)();return e?(0,n.jsxs)("div",{className:"max-w-5xl mx-auto pb-12",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.default,{href:"/dashboard",className:"text-sm text-gray-500 hover:text-gray-900 flex items-center mb-2",children:[(0,n.jsx)(d.Z,{className:"w-4 h-4 mr-1"})," Back to Dashboard"]}),(0,n.jsx)("h1",{className:"font-display text-4xl font-bold text-gray-900",children:e.name}),(0,n.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-gray-500 text-sm",children:[(0,n.jsxs)("span",{className:"flex items-center",children:[(0,n.jsx)(l.Z,{className:"w-4 h-4 mr-1"})," ",new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),(0,n.jsx)("span",{children:"•"}),(0,n.jsxs)("span",{children:[e.days.length," Days"]})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(s.z,{variant:"outline",size:"sm",className:"hidden sm:flex",children:[(0,n.jsx)(u,{className:"w-4 h-4 mr-2"})," Share"]}),(0,n.jsxs)(s.z,{variant:"outline",size:"sm",children:[(0,n.jsx)(m,{className:"w-4 h-4 mr-2"})," Export"]}),(0,n.jsx)(o.default,{href:"/dashboard/preferences",children:(0,n.jsxs)(s.z,{className:"bg-egyptian-nile text-white hover:bg-egyptian-nile/90",children:[(0,n.jsx)(x,{className:"w-4 h-4 mr-2"})," Edit Preferences"]})})]})]}),(0,n.jsxs)("div",{className:"space-y-8 relative",children:[(0,n.jsx)("div",{className:"absolute left-4 md:left-8 top-4 bottom-4 w-0.5 bg-gray-200 hidden md:block"}),e.days.map((e,t)=>(0,n.jsxs)(i.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1*t},className:"relative pl-0 md:pl-20",children:[(0,n.jsxs)("div",{className:"absolute left-0 w-16 h-16 bg-white border-2 border-egyptian-gold rounded-full flex flex-col items-center justify-center z-10 hidden md:flex shadow-sm",children:[(0,n.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Day"}),(0,n.jsx)("span",{className:"text-xl font-bold text-egyptian-nile",children:e.dayNumber})]}),(0,n.jsxs)("div",{className:"flex md:hidden items-center gap-2 mb-4",children:[(0,n.jsxs)("span",{className:"bg-egyptian-gold text-white px-3 py-1 rounded-lg text-sm font-bold",children:["Day ",e.dayNumber]}),(0,n.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(e.date).toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"})})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[e.activities.map((e,t)=>(0,n.jsx)(g.Zb,{className:"border-none shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden bg-white group",children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,n.jsxs)("div",{className:"w-full md:w-32 bg-gray-50 p-4 md:p-6 flex flex-row md:flex-col items-center md:justify-center gap-2 border-b md:border-b-0 md:border-r border-gray-100",children:[(0,n.jsx)(h.Z,{className:"w-8 h-8 text-gray-600"}),(0,n.jsx)("div",{className:"text-sm font-medium text-gray-600",children:e.startTime}),(0,n.jsx)("div",{className:"h-px w-4 bg-gray-300 hidden md:block"}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:e.endTime})]}),(0,n.jsxs)("div",{className:"p-4 md:p-6 flex-1",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"font-bold text-lg text-gray-900 mb-1 group-hover:text-egyptian-terracotta transition-colors",children:["Visit ",e.destinationId]}),(0,n.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,n.jsx)(f.Z,{className:"w-3.5 h-3.5 mr-1"}),(0,n.jsx)("span",{children:"Cairo, Egypt"})]})]}),(0,n.jsx)(y.C,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-100 border-none",children:"Activity"})]}),(0,n.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Enjoy a guided tour of the Great Pyramids of Giza, the last surviving wonder of the ancient world."})]})]})},e.id)),e.accommodation&&(0,n.jsx)(g.Zb,{className:"bg-amber-50/50 border-amber-100 border shadow-none",children:(0,n.jsxs)(g.aY,{className:"p-4 flex items-center gap-4",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center flex-shrink-0",children:(0,n.jsx)("span",{className:"text-amber-600 text-lg",children:"\uD83D\uDECF️"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-xs font-bold text-amber-800 uppercase tracking-wide",children:"Accommodation"}),(0,n.jsx)("p",{className:"font-medium text-gray-900",children:e.accommodation.name}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:e.accommodation.location})]})]})})]})]},e.dayNumber))]})]}):(0,n.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center",children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded-3xl shadow-xl max-w-md mx-auto",children:[(0,n.jsx)("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,n.jsx)(l.Z,{className:"w-10 h-10 text-gray-300"})}),(0,n.jsx)("h1",{className:"font-display text-2xl font-bold mb-3 text-gray-900",children:"No Travel Plan Yet"}),(0,n.jsx)("p",{className:"text-gray-500 mb-8 leading-relaxed",children:"You haven't created a travel itinerary yet. Let our AI help you plan the perfect Egyptian adventure."}),(0,n.jsx)(o.default,{href:"/dashboard/trip-planner",children:(0,n.jsx)(s.z,{size:"lg",className:"w-full bg-gray-800 hover:bg-gray-900",children:"Create New Plan"})})]})})}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(57437),a=r(2265),s=r(94508);let o=a.forwardRef((e,t)=>{let{className:r,variant:a="default",...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border border-input"}[a],r),...o})});o.displayName="Badge"},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return d}});var n=r(57437),a=r(2265),s=r(37053),o=r(90535),i=r(94508);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md shadow-primary/15",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input/70 bg-background/70 backdrop-blur hover:bg-accent/70 hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent/70 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"gradient-egyptian text-white hover:opacity-90 shadow-md transition-opacity"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:r})),ref:t,...c})});d.displayName="Button"},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var n=r(61994),a=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},32660:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},52048:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]])},72218:function(e,t,r){"use strict";r.d(t,{Cd:function(){return d},Dj:function(){return c},K4:function(){return o},av:function(){return m},sT:function(){return i},vJ:function(){return u}});var n=r(39129);let a={user:(e=>{try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return null}})("user"),token:localStorage.getItem("token"),refreshToken:localStorage.getItem("refreshToken"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,error:null},s=(0,n.oM)({name:"auth",initialState:a,reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null},logout:e=>{e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("user")},tokenRefreshed:(e,t)=>{let{token:r,refreshToken:n,expiresIn:a}=t.payload;if(e.token=r,e.refreshToken=n,e.isAuthenticated=!0,localStorage.setItem("token",r),localStorage.setItem("refreshToken",n),a){let e=Date.now()+1e3*a;localStorage.setItem("tokenExpiry",e.toString())}},setCredentials:(e,t)=>{let{user:r,token:n,refreshToken:a,expiresIn:s}=t.payload;if(e.user=r,e.token=n,e.refreshToken=a,e.isAuthenticated=!0,e.error=null,e.isLoading=!1,localStorage.setItem("token",n),localStorage.setItem("refreshToken",a),localStorage.setItem("user",JSON.stringify(r)),s){let e=Date.now()+1e3*s;localStorage.setItem("tokenExpiry",e.toString())}},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,localStorage.setItem("user",JSON.stringify(t.payload))}}}),{setLoading:o,setError:i,clearError:l,logout:d,setCredentials:c,tokenRefreshed:u,setUser:m}=s.actions;t.ZP=s.reducer},38059:function(e,t,r){"use strict";r.d(t,{h:function(){return x}});var n=r(79523),a=r(23557),s=r(72218);let o=e=>{try{return window.localStorage.getItem(e)}catch(e){return null}},i=(e,t)=>{try{window.localStorage.setItem(e,t)}catch(e){}},l=e=>{try{window.localStorage.removeItem(e)}catch(e){}},d=()=>{let e=o("tokenExpiry");return!e||Date.now()>=parseInt(e,10)},c=()=>{let e=o("tokenExpiry");if(!e)return!1;let t=Date.now();return parseInt(e,10)-t<3e5},u=(0,n.ni)({baseUrl:"https://kemeteg.runasp.net/api",prepareHeaders:(e,t)=>{var r,n;let{getState:a}=t,s=(null===(n=a())||void 0===n?void 0:null===(r=n.auth)||void 0===r?void 0:r.token)||o("token");return s&&e.set("authorization","Bearer ".concat(s)),e.set("content-type","application/json"),e}}),m=async(e,t,r)=>{if(c()){console.log("Token expiring soon, refreshing proactively...");let e=o("refreshToken");if(e){let n=await u({url:"/Auth/refresh",method:"POST",body:{refreshToken:e}},t,r);if(n.data){let r=n.data,a=(null==r?void 0:r.data)||r,o=null==a?void 0:a.accessToken,l=null==a?void 0:a.refreshToken,d=(null==a?void 0:a.expiresIn)||3600;o&&(i("token",o),l&&i("refreshToken",l),i("tokenExpiry",(Date.now()+1e3*d).toString()),t.dispatch((0,s.vJ)({token:o,refreshToken:l||e,expiresIn:d})),console.log("Token refreshed successfully"))}}}let n=await u(e,t,r);if(n.error&&401===n.error.status){console.log("Unauthorized (401), attempting to refresh token...");let a=o("refreshToken");if(a&&!d()){let o=await u({url:"/Auth/refresh",method:"POST",body:{refreshToken:a}},t,r);if(o.data){let l=o.data,d=(null==l?void 0:l.data)||l,c=null==d?void 0:d.accessToken,m=null==d?void 0:d.refreshToken,x=(null==d?void 0:d.expiresIn)||3600;c&&(i("token",c),m&&i("refreshToken",m),i("tokenExpiry",(Date.now()+1e3*x).toString()),t.dispatch((0,s.vJ)({token:c,refreshToken:m||a,expiresIn:x})),n=await u(e,t,r),console.log("Token refreshed and request retried"))}else console.log("Token refresh failed, logging out..."),l("token"),l("refreshToken"),l("tokenExpiry"),t.dispatch((0,s.Cd)()),window.location.href="/login"}else console.log("No valid refresh token, logging out..."),l("token"),l("refreshToken"),l("tokenExpiry"),t.dispatch((0,s.Cd)()),window.location.href="/login"}return n},x=(0,a.LC)({reducerPath:"api",baseQuery:m,tagTypes:["User","Auth","TravelPlan","Destination","Analytics","Booking","Review","Preference","Notification"],endpoints:()=>({})})}},function(e){e.O(0,[6137,7210,5650,3557,2388,2971,2117,1744],function(){return e(e.s=24772)}),_N_E=e.O()}]);