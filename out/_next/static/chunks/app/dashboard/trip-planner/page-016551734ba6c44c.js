(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2145],{88676:function(e,t,r){Promise.resolve().then(r.bind(r,6241))},6241:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var a=r(57437),i=r(2265),n=r(79405),s=r(62869),o=r(66070),l=r(73966),c=r(66840),d="Progress",[u,p]=(0,l.b)(d),[m,h]=u(d),g=i.forwardRef((e,t)=>{var r,i,n,s;let{__scopeProgress:o,value:l=null,max:d,getValueLabel:u=f,...p}=e;(d||0===d)&&!k(d)&&console.error((r="".concat(d),i="Progress","Invalid prop `max` of value `".concat(r,"` supplied to `").concat(i,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let h=k(d)?d:100;null===l||N(l,h)||console.error((n="".concat(l),s="Progress","Invalid prop `value` of value `".concat(n,"` supplied to `").concat(s,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let g=N(l,h)?l:null,x=b(g)?u(g,h):void 0;return(0,a.jsx)(m,{scope:o,value:g,max:h,children:(0,a.jsx)(c.WV.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":b(g)?g:void 0,"aria-valuetext":x,role:"progressbar","data-state":v(g,h),"data-value":null!=g?g:void 0,"data-max":h,...p,ref:t})})});g.displayName=d;var x="ProgressIndicator",y=i.forwardRef((e,t)=>{var r;let{__scopeProgress:i,...n}=e,s=h(x,i);return(0,a.jsx)(c.WV.div,{"data-state":v(s.value,s.max),"data-value":null!==(r=s.value)&&void 0!==r?r:void 0,"data-max":s.max,...n,ref:t})});function f(e,t){return"".concat(Math.round(e/t*100),"%")}function v(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function b(e){return"number"==typeof e}function k(e){return b(e)&&!isNaN(e)&&e>0}function N(e,t){return b(e)&&!isNaN(e)&&e<=t&&e>=0}y.displayName=x;var j=r(94508);let w=i.forwardRef((e,t)=>{let{className:r,value:i,...n}=e;return(0,a.jsx)(g,{ref:t,className:(0,j.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,a.jsx)(y,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})});w.displayName=g.displayName;var S=r(27648),T=r(95805),C=r(88997),Z=r(31047),I=r(39763);let M=(0,I.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),P=(0,I.Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),A=(0,I.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var E=r(83774);let D=(0,I.Z)("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),z=(0,I.Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),H=(0,I.Z)("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]),R=(0,I.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),L=(0,I.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),O=(0,I.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var _=r(99376),V=r(86726);let B=[{id:"solo",label:"Solo Adventure",icon:T.Z,description:"Perfect for self-discovery and flexibility"},{id:"couple",label:"Romantic Getaway",icon:C.Z,description:"Ideal for couples seeking memorable experiences"},{id:"family",label:"Family Trip",icon:T.Z,description:"Kid-friendly activities for all ages"},{id:"friends",label:"Friends Group",icon:T.Z,description:"Exciting experiences for friend groups"}],W=[{id:"1",label:"Just Me",description:"Solo traveler"},{id:"2",label:"Couple",description:"2 people"},{id:"3-4",label:"Small Group",description:"3-4 people"},{id:"5+",label:"Large Group",description:"5+ people"}],Y=[{id:"3-5",label:"Quick Getaway",description:"3-5 days",icon:Z.Z},{id:"7-10",label:"Week Adventure",description:"7-10 days",icon:Z.Z},{id:"14+",label:"Extended Journey",description:"14+ days",icon:Z.Z}],$=[{id:"budget",label:"Budget-Friendly",description:"$50-100/day",icon:M},{id:"mid",label:"Comfortable",description:"$100-200/day",icon:M},{id:"luxury",label:"Luxury Experience",description:"$200+/day",icon:P}],q=[{id:"history",label:"Ancient History",icon:A},{id:"adventure",label:"Adventure",icon:E.Z},{id:"culture",label:"Local Culture",icon:C.Z},{id:"food",label:"Egyptian Cuisine",icon:D},{id:"shopping",label:"Shopping",icon:z},{id:"relaxation",label:"Relaxation",icon:H}],J=[{id:"budget",label:"Budget Hotels",description:"Clean, basic accommodations"},{id:"mid",label:"Mid-Range Hotels",description:"Comfortable with amenities"},{id:"luxury",label:"Luxury Resorts",description:"Premium experiences"},{id:"local",label:"Local Guesthouses",description:"Authentic local experience"}],G=[{id:"public",label:"Public Transport",description:"Buses, trains, local experience"},{id:"private",label:"Private Car",description:"Comfortable and flexible"},{id:"mixed",label:"Mixed Transport",description:"Combination of options"}],U=[{id:"relaxed",label:"Relaxed Pace",description:"2-3 activities per day"},{id:"moderate",label:"Moderate Pace",description:"3-4 activities per day"},{id:"packed",label:"Action-Packed",description:"5+ activities per day"}];function F(){let e=(0,_.useRouter)(),{createTravelPlan:t}=(0,V.H)(),[r,l]=(0,i.useState)(0),[c,d]=(0,i.useState)({tripType:"",groupSize:"",duration:"",budget:"",interests:[],accommodation:"",transportation:"",pace:"",name:""}),u=[{title:"Trip Type",description:"What kind of traveler are you?"},{title:"Group Size",description:"How many people are traveling?"},{title:"Duration",description:"How long is your trip?"},{title:"Budget",description:"What's your daily budget?"},{title:"Interests",description:"What interests you most?"},{title:"Accommodation",description:"Where would you like to stay?"},{title:"Transportation",description:"How do you prefer to travel?"},{title:"Trip Pace",description:"What's your preferred pace?"}],p=e=>{d(t=>({...t,interests:t.interests.includes(e)?t.interests.filter(t=>t!==e):[...t.interests,e]}))},m=async()=>{let r="".concat(c.tripType.charAt(0).toUpperCase()+c.tripType.slice(1)," Egypt Adventure"),a=new Date,i=parseInt(c.duration.split("-")[0])||7,n=new Date;n.setDate(a.getDate()+i),t({name:r,startDate:a.toISOString(),endDate:n.toISOString(),status:"draft",preferences:c,days:Array.from({length:i},(e,t)=>({dayNumber:t+1,date:new Date(a.getTime()+864e5*t).toISOString(),activities:[{id:"activity-".concat(t,"-1"),destinationId:"cairo-city-center",activityId:"activity-".concat(t,"-1"),startTime:"09:00",endTime:"10:00",notes:0===t?"Arrival & Check-in":"Breakfast at Hotel"},{id:"activity-".concat(t,"-2"),destinationId:"cairo-historical-sites",activityId:"activity-".concat(t,"-2"),startTime:"14:00",endTime:"16:00",notes:0===t?"Explore Local Area":"Visit Historical Sites"}]}))}),e.push("/dashboard/travel-plan")},h=()=>{switch(r){case 0:return""!==c.tripType;case 1:return""!==c.groupSize;case 2:return""!==c.duration;case 3:return""!==c.budget;case 4:return c.interests.length>0;case 5:return""!==c.accommodation;case 6:return""!==c.transportation;case 7:return""!==c.pace;default:return!1}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto pb-12",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(S.default,{href:"/dashboard",className:"text-sm text-gray-500 hover:text-gray-900 flex items-center mb-4",children:[(0,a.jsx)(L,{className:"w-4 h-4 mr-1"})," Back to Dashboard"]}),(0,a.jsx)("h1",{className:"font-display text-4xl font-bold text-gray-900 mb-2",children:"Plan Your Egypt Adventure"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Answer a few questions to create your personalized itinerary"})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Step ",r+1," of ",8]}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:u[r].title})]}),(0,a.jsx)(w,{value:(r+1)/8*100,className:"h-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:u[r].description})]}),(0,a.jsx)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:(0,a.jsxs)(o.Zb,{className:"mb-8",children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{className:"text-xl text-gray-900",children:u[r].title})}),(0,a.jsx)(o.aY,{children:(()=>{switch(r){case 0:return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.map(e=>{let t=e.icon;return(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(c.tripType===e.id?"ring-2 ring-gray-800 bg-gray-50":"hover:bg-gray-50"),onClick:()=>d(t=>({...t,tripType:e.id})),children:(0,a.jsx)(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(t,{className:"w-6 h-6 text-gray-700"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),c.tripType===e.id&&(0,a.jsx)(R,{className:"w-5 h-5 text-gray-800"})]})})},e.id)})});case 1:return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:W.map(e=>(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(c.groupSize===e.id?"ring-2 ring-gray-800 bg-gray-50":"hover:bg-gray-50"),onClick:()=>d(t=>({...t,groupSize:e.id})),children:(0,a.jsx)(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),c.groupSize===e.id&&(0,a.jsx)(R,{className:"w-5 h-5 text-gray-800"})]})})},e.id))});case 2:return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Y.map(e=>{let t=e.icon;return(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(c.duration===e.id?"ring-2 ring-gray-800 bg-gray-50":"hover:bg-gray-50"),onClick:()=>d(t=>({...t,duration:e.id})),children:(0,a.jsxs)(o.aY,{className:"p-6 text-center",children:[(0,a.jsx)(t,{className:"w-8 h-8 text-gray-700 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),c.duration===e.id&&(0,a.jsx)(R,{className:"w-5 h-5 text-gray-800 mx-auto mt-2"})]})},e.id)})});case 3:return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:$.map(e=>{let t=e.icon;return(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(c.budget===e.id?"ring-2 ring-gray-800 bg-gray-50":"hover:bg-gray-50"),onClick:()=>d(t=>({...t,budget:e.id})),children:(0,a.jsxs)(o.aY,{className:"p-6 text-center",children:[(0,a.jsx)(t,{className:"w-8 h-8 text-gray-700 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),c.budget===e.id&&(0,a.jsx)(R,{className:"w-5 h-5 text-gray-800 mx-auto mt-2"})]})},e.id)})});case 4:return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:q.map(e=>{let t=e.icon,r=c.interests.includes(e.id);return(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(r?"ring-2 ring-gray-800 bg-gray-50":"hover:bg-gray-50"),onClick:()=>p(e.id),children:(0,a.jsxs)(o.aY,{className:"p-4 text-center",children:[(0,a.jsx)(t,{className:"w-6 h-6 text-gray-700 mx-auto mb-2"}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 text-sm",children:e.label}),r&&(0,a.jsx)(R,{className:"w-4 h-4 text-gray-800 mx-auto mt-2"})]})},e.id)})});case 5:return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:J.map(e=>(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(c.accommodation===e.id?"ring-2 ring-gray-800 bg-gray-50":"hover:bg-gray-50"),onClick:()=>d(t=>({...t,accommodation:e.id})),children:(0,a.jsx)(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),c.accommodation===e.id&&(0,a.jsx)(R,{className:"w-5 h-5 text-gray-800"})]})})},e.id))});case 6:return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:G.map(e=>(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(c.transportation===e.id?"ring-2 ring-gray-800 bg-gray-50":"hover:bg-gray-50"),onClick:()=>d(t=>({...t,transportation:e.id})),children:(0,a.jsx)(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),c.transportation===e.id&&(0,a.jsx)(R,{className:"w-5 h-5 text-gray-800"})]})})},e.id))});case 7:return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:U.map(e=>(0,a.jsx)(o.Zb,{className:"cursor-pointer transition-all hover:shadow-lg ".concat(c.pace===e.id?"ring-2 ring-gray-800 bg-gray-50":"hover:bg-gray-50"),onClick:()=>d(t=>({...t,pace:e.id})),children:(0,a.jsx)(o.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),c.pace===e.id&&(0,a.jsx)(R,{className:"w-5 h-5 text-gray-800"})]})})},e.id))});default:return null}})()})]})},r),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(s.z,{variant:"outline",onClick:()=>{r>0&&l(r-1)},disabled:0===r,className:"flex items-center gap-2",children:[(0,a.jsx)(L,{className:"w-4 h-4"}),"Previous"]}),7===r?(0,a.jsxs)(s.z,{onClick:m,disabled:!h(),className:"bg-gray-800 hover:bg-gray-900 text-white flex items-center gap-2",children:["Create My Trip",(0,a.jsx)(R,{className:"w-4 h-4"})]}):(0,a.jsxs)(s.z,{onClick:()=>{r<7&&l(r+1)},disabled:!h(),className:"bg-gray-800 hover:bg-gray-900 text-white flex items-center gap-2",children:["Next",(0,a.jsx)(O,{className:"w-4 h-4"})]})]})]})}},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var a=r(57437),i=r(2265),n=r(37053),s=r(90535),o=r(94508);let l=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md shadow-primary/15",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input/70 bg-background/70 backdrop-blur hover:bg-accent/70 hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent/70 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"gradient-egyptian text-white hover:opacity-90 shadow-md transition-opacity"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:i,size:s,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:i,size:s,className:r})),ref:t,...d})});c.displayName="Button"},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(61994),i=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.m6)((0,a.W)(t))}},88997:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},95805:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},72218:function(e,t,r){"use strict";r.d(t,{Cd:function(){return c},Dj:function(){return d},K4:function(){return s},av:function(){return p},sT:function(){return o},vJ:function(){return u}});var a=r(39129);let i={user:(e=>{try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return null}})("user"),token:localStorage.getItem("token"),refreshToken:localStorage.getItem("refreshToken"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,error:null},n=(0,a.oM)({name:"auth",initialState:i,reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null},logout:e=>{e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("user")},tokenRefreshed:(e,t)=>{let{token:r,refreshToken:a,expiresIn:i}=t.payload;if(e.token=r,e.refreshToken=a,e.isAuthenticated=!0,localStorage.setItem("token",r),localStorage.setItem("refreshToken",a),i){let e=Date.now()+1e3*i;localStorage.setItem("tokenExpiry",e.toString())}},setCredentials:(e,t)=>{let{user:r,token:a,refreshToken:i,expiresIn:n}=t.payload;if(e.user=r,e.token=a,e.refreshToken=i,e.isAuthenticated=!0,e.error=null,e.isLoading=!1,localStorage.setItem("token",a),localStorage.setItem("refreshToken",i),localStorage.setItem("user",JSON.stringify(r)),n){let e=Date.now()+1e3*n;localStorage.setItem("tokenExpiry",e.toString())}},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,localStorage.setItem("user",JSON.stringify(t.payload))}}}),{setLoading:s,setError:o,clearError:l,logout:c,setCredentials:d,tokenRefreshed:u,setUser:p}=n.actions;t.ZP=n.reducer},38059:function(e,t,r){"use strict";r.d(t,{h:function(){return m}});var a=r(79523),i=r(23557),n=r(72218);let s=e=>{try{return window.localStorage.getItem(e)}catch(e){return null}},o=(e,t)=>{try{window.localStorage.setItem(e,t)}catch(e){}},l=e=>{try{window.localStorage.removeItem(e)}catch(e){}},c=()=>{let e=s("tokenExpiry");return!e||Date.now()>=parseInt(e,10)},d=()=>{let e=s("tokenExpiry");if(!e)return!1;let t=Date.now();return parseInt(e,10)-t<3e5},u=(0,a.ni)({baseUrl:"https://kemeteg.runasp.net/api",prepareHeaders:(e,t)=>{var r,a;let{getState:i}=t,n=(null===(a=i())||void 0===a?void 0:null===(r=a.auth)||void 0===r?void 0:r.token)||s("token");return n&&e.set("authorization","Bearer ".concat(n)),e.set("content-type","application/json"),e}}),p=async(e,t,r)=>{if(d()){console.log("Token expiring soon, refreshing proactively...");let e=s("refreshToken");if(e){let a=await u({url:"/Auth/refresh",method:"POST",body:{refreshToken:e}},t,r);if(a.data){let r=a.data,i=(null==r?void 0:r.data)||r,s=null==i?void 0:i.accessToken,l=null==i?void 0:i.refreshToken,c=(null==i?void 0:i.expiresIn)||3600;s&&(o("token",s),l&&o("refreshToken",l),o("tokenExpiry",(Date.now()+1e3*c).toString()),t.dispatch((0,n.vJ)({token:s,refreshToken:l||e,expiresIn:c})),console.log("Token refreshed successfully"))}}}let a=await u(e,t,r);if(a.error&&401===a.error.status){console.log("Unauthorized (401), attempting to refresh token...");let i=s("refreshToken");if(i&&!c()){let s=await u({url:"/Auth/refresh",method:"POST",body:{refreshToken:i}},t,r);if(s.data){let l=s.data,c=(null==l?void 0:l.data)||l,d=null==c?void 0:c.accessToken,p=null==c?void 0:c.refreshToken,m=(null==c?void 0:c.expiresIn)||3600;d&&(o("token",d),p&&o("refreshToken",p),o("tokenExpiry",(Date.now()+1e3*m).toString()),t.dispatch((0,n.vJ)({token:d,refreshToken:p||i,expiresIn:m})),a=await u(e,t,r),console.log("Token refreshed and request retried"))}else console.log("Token refresh failed, logging out..."),l("token"),l("refreshToken"),l("tokenExpiry"),t.dispatch((0,n.Cd)()),window.location.href="/login"}else console.log("No valid refresh token, logging out..."),l("token"),l("refreshToken"),l("tokenExpiry"),t.dispatch((0,n.Cd)()),window.location.href="/login"}return a},m=(0,i.LC)({reducerPath:"api",baseQuery:p,tagTypes:["User","Auth","TravelPlan","Destination","Analytics","Booking","Review","Preference","Notification"],endpoints:()=>({})})},73966:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var a=r(2265),i=r(57437);function n(e,t=[]){let r=[],n=()=>{let t=r.map(e=>a.createContext(e));return function(r){let i=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:i}}),[r,i])}};return n.scopeName=e,[function(t,n){let s=a.createContext(n);s.displayName=t+"Context";let o=r.length;r=[...r,n];let l=t=>{let{scope:r,children:n,...l}=t,c=r?.[e]?.[o]||s,d=a.useMemo(()=>l,Object.values(l));return(0,i.jsx)(c.Provider,{value:d,children:n})};return l.displayName=t+"Provider",[l,function(r,i){let l=i?.[e]?.[o]||s,c=a.useContext(l);if(c)return c;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=r.reduce((t,{useScope:r,scopeName:a})=>{let i=r(e)[`__scope${a}`];return{...t,...i}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}(n,...t)]}},66840:function(e,t,r){"use strict";r.d(t,{WV:function(){return s}});var a=r(2265);r(54887);var i=r(37053),n=r(57437),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.Z8)(`Primitive.${t}`),s=a.forwardRef((e,a)=>{let{asChild:i,...s}=e,o=i?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(o,{...s,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{})}},function(e){e.O(0,[6137,7210,5650,3557,2388,2971,2117,1744],function(){return e(e.s=88676)}),_N_E=e.O()}]);