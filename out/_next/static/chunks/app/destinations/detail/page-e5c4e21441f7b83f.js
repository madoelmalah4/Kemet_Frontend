(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1332],{16763:function(e,t,r){Promise.resolve().then(r.bind(r,6579))},6579:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var a=r(57437),n=r(99376),s=r(37775),i=r(79405),o=r(15863),l=r(88997),c=r(83774),d=r(95252);let u=(0,r(39763).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var m=r(42208),f=r(91723),h=r(31047),x=r(66070),p=r(62869),g=r(35974),y=r(27648),v=r(33145),b=r(77992),k=r(37610),j=r(72218);function N(e){var t,r;let{destinationId:n}=e,{toast:N}=(0,b.pm)(),w=(0,k.CG)(j.vN),{data:T,isLoading:S,error:E}=(0,s.t$)(n),{data:D=[]}=(0,s.X_)(void 0,{skip:!w}),[I,{isLoading:Z}]=(0,s.ul)(),[A,{isLoading:P}]=(0,s.XB)(),O=D.some(e=>e.id===n),C=async()=>{if(!w){N({title:"Authentication Required",description:"Please login to add destinations to your favorites.",variant:"destructive"});return}try{O?(await A(n).unwrap(),N({title:"Removed from favorites"})):(await I(n).unwrap(),N({title:"Added to favorites"}))}catch(e){N({title:"Error",description:"Failed to update favorites. Please try again.",variant:"destructive"})}};return S?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)(o.Z,{className:"h-12 w-12 animate-spin text-blue-600"})}):E||!T?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-red-500 font-semibold text-lg",children:"Failed to load destination details."}),(0,a.jsx)(y.default,{href:"/destinations",children:(0,a.jsx)(p.z,{children:"Back to Destinations"})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsxs)("div",{className:"relative h-[50vh] md:h-[60vh] overflow-hidden",children:[T.imageUrl?(0,a.jsx)(v.default,{src:T.imageUrl,alt:T.name||"Destination image",fill:!0,sizes:"100vw",className:"object-cover",priority:!0}):(0,a.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400 text-lg",children:"No Image Available"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),(0,a.jsx)("div",{className:"absolute top-6 right-6 z-10",children:(0,a.jsx)(p.z,{variant:"secondary",size:"icon",className:"rounded-full shadow-lg backdrop-blur-md transition-all ".concat(O?"bg-red-50 text-red-500 hover:bg-red-100":"bg-white/20 text-white hover:bg-white/40"),onClick:C,disabled:Z||P,children:(0,a.jsx)(l.Z,{className:"w-6 h-6 ".concat(O?"fill-current":"")})})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-6 md:p-12",children:(0,a.jsx)("div",{className:"container mx-auto max-w-5xl",children:(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,a.jsxs)(g.C,{className:"bg-white/20 backdrop-blur-md text-white border-white/30",children:[(0,a.jsx)(c.Z,{className:"h-3.5 w-3.5 mr-1.5"}),T.city]}),void 0!==T.estimatedPrice&&(0,a.jsxs)(g.C,{className:"bg-green-500/80 backdrop-blur-md text-white border-none",children:[(0,a.jsx)(d.Z,{className:"h-3.5 w-3.5 mr-1"}),0===T.estimatedPrice?"Free":"".concat(T.estimatedPrice," EGP")]})]}),(0,a.jsx)("h1",{className:"font-display text-4xl md:text-6xl font-bold text-white mb-2",children:T.name})]})})})]}),(0,a.jsx)("div",{className:"container mx-auto px-4 md:px-6 py-12 max-w-5xl",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:(0,a.jsxs)(x.Zb,{className:"border-gray-200 shadow-sm",children:[(0,a.jsx)(x.Ol,{className:"border-b border-gray-100",children:(0,a.jsxs)(x.ll,{className:"text-2xl font-display flex items-center gap-2",children:[(0,a.jsx)(u,{className:"w-5 h-5 text-blue-600"}),"About"]})}),(0,a.jsx)(x.aY,{className:"pt-6",children:(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed text-base whitespace-pre-line",children:T.description})})]})}),T.vrUrlImage&&(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:(0,a.jsxs)(x.Zb,{className:"border-gray-200 shadow-sm overflow-hidden",children:[(0,a.jsxs)(x.Ol,{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white border-none",children:[(0,a.jsxs)(x.ll,{className:"flex items-center gap-2 text-xl",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5"}),"Virtual Tour"]}),(0,a.jsxs)("p",{className:"text-sm text-white/90 mt-1",children:["Experience ",T.name," in immersive 360\xb0 virtual reality"]})]}),(0,a.jsx)(x.aY,{className:"p-0",children:(0,a.jsx)("div",{className:"aspect-video bg-gray-900 relative",children:(0,a.jsx)("iframe",{src:null==T?void 0:T.vrUrlImage,className:"w-full h-full",allowFullScreen:!0,title:"VR Tour of ".concat(T.name)})})})]})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(i.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:(0,a.jsxs)(x.Zb,{className:"border-gray-200 shadow-sm",children:[(0,a.jsx)(x.Ol,{className:"border-b border-gray-100 pb-3",children:(0,a.jsx)(x.ll,{className:"text-base font-semibold",children:"Practical Information"})}),(0,a.jsxs)(x.aY,{className:"pt-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-bold",children:"Location"}),(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[T.city,", Egypt"]})]})]}),(T.fromWorkingHours||T.endWorkingHours)&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-bold",children:"Working Hours"}),(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[(null===(t=T.fromWorkingHours)||void 0===t?void 0:t.substring(0,5))||"09:00"," - ",(null===(r=T.endWorkingHours)||void 0===r?void 0:r.substring(0,5))||"18:00"]})]})]}),void 0!==T.estimatedPrice&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-bold",children:"Estimated Entry Fee"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:0===T.estimatedPrice?"Free Entry":"".concat(T.estimatedPrice," EGP")})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide font-bold",children:"Best Time to Visit"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"October - April"})]})]})]})]})}),(0,a.jsx)(i.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.5},children:(0,a.jsx)(x.Zb,{className:"border-gray-200 shadow-sm sticky top-6",children:(0,a.jsxs)(x.aY,{className:"p-6",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-2 text-gray-900",children:"Plan Your Visit"}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm mb-6 leading-relaxed",children:["Add ",T.name," to your personalized Egypt itinerary and let our AI help you plan the perfect trip."]}),(0,a.jsx)(y.default,{href:"/dashboard/trip-planner",children:(0,a.jsx)(p.z,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white h-11",children:"Create Travel Plan"})})]})})})]})]})})]})}var w=r(2265);function T(){let e=(0,n.useSearchParams)().get("id");return e?(0,a.jsx)(N,{destinationId:e}):(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)("p",{className:"text-red-500 font-semibold",children:"Error: No destination ID provided."})})}function S(){return(0,a.jsx)(w.Suspense,{fallback:(0,a.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,a.jsx)(o.Z,{className:"w-8 h-8 animate-spin text-blue-600"})}),children:(0,a.jsx)(T,{})})}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(57437),n=r(2265),s=r(94508);let i=n.forwardRef((e,t)=>{let{className:r,variant:n="default",...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border border-input"}[n],r),...i})});i.displayName="Badge"},62869:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var a=r(57437),n=r(2265),s=r(37053),i=r(90535),o=r(94508);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md shadow-primary/15",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input/70 bg-background/70 backdrop-blur hover:bg-accent/70 hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent/70 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"gradient-egyptian text-white hover:opacity-90 shadow-md transition-opacity"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var a=r(57437),n=r(2265),s=r(94508);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-3xl border border-border/60 bg-card/80 backdrop-blur-sm text-card-foreground shadow-sm hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},77992:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var a=r(2265);let n=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(61994),n=r(53335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},31047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},91723:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},95252:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},42208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},88997:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},15863:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},83774:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(39763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},72218:function(e,t,r){"use strict";r.d(t,{Cd:function(){return c},Dj:function(){return d},K4:function(){return i},av:function(){return m},sT:function(){return o},vJ:function(){return u},vN:function(){return f}});var a=r(39129);let n={user:(e=>{try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return null}})("user"),token:localStorage.getItem("token"),refreshToken:localStorage.getItem("refreshToken"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,error:null},s=(0,a.oM)({name:"auth",initialState:n,reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null},logout:e=>{e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("user")},tokenRefreshed:(e,t)=>{let{token:r,refreshToken:a,expiresIn:n}=t.payload;if(e.token=r,e.refreshToken=a,e.isAuthenticated=!0,localStorage.setItem("token",r),localStorage.setItem("refreshToken",a),n){let e=Date.now()+1e3*n;localStorage.setItem("tokenExpiry",e.toString())}},setCredentials:(e,t)=>{let{user:r,token:a,refreshToken:n,expiresIn:s}=t.payload;if(e.user=r,e.token=a,e.refreshToken=n,e.isAuthenticated=!0,e.error=null,e.isLoading=!1,localStorage.setItem("token",a),localStorage.setItem("refreshToken",n),localStorage.setItem("user",JSON.stringify(r)),s){let e=Date.now()+1e3*s;localStorage.setItem("tokenExpiry",e.toString())}},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,localStorage.setItem("user",JSON.stringify(t.payload))}}}),{setLoading:i,setError:o,clearError:l,logout:c,setCredentials:d,tokenRefreshed:u,setUser:m}=s.actions;t.ZP=s.reducer;let f=e=>e.auth.isAuthenticated},38059:function(e,t,r){"use strict";r.d(t,{h:function(){return f}});var a=r(79523),n=r(23557),s=r(72218);let i=e=>{try{return window.localStorage.getItem(e)}catch(e){return null}},o=(e,t)=>{try{window.localStorage.setItem(e,t)}catch(e){}},l=e=>{try{window.localStorage.removeItem(e)}catch(e){}},c=()=>{let e=i("tokenExpiry");return!e||Date.now()>=parseInt(e,10)},d=()=>{let e=i("tokenExpiry");if(!e)return!1;let t=Date.now();return parseInt(e,10)-t<3e5},u=(0,a.ni)({baseUrl:"https://kemeteg.runasp.net/api",prepareHeaders:(e,t)=>{var r,a;let{getState:n}=t,s=(null===(a=n())||void 0===a?void 0:null===(r=a.auth)||void 0===r?void 0:r.token)||i("token");return s&&e.set("authorization","Bearer ".concat(s)),e.set("content-type","application/json"),e}}),m=async(e,t,r)=>{if(d()){console.log("Token expiring soon, refreshing proactively...");let e=i("refreshToken");if(e){let a=await u({url:"/Auth/refresh",method:"POST",body:{refreshToken:e}},t,r);if(a.data){let r=a.data,n=(null==r?void 0:r.data)||r,i=null==n?void 0:n.accessToken,l=null==n?void 0:n.refreshToken,c=(null==n?void 0:n.expiresIn)||3600;i&&(o("token",i),l&&o("refreshToken",l),o("tokenExpiry",(Date.now()+1e3*c).toString()),t.dispatch((0,s.vJ)({token:i,refreshToken:l||e,expiresIn:c})),console.log("Token refreshed successfully"))}}}let a=await u(e,t,r);if(a.error&&401===a.error.status){console.log("Unauthorized (401), attempting to refresh token...");let n=i("refreshToken");if(n&&!c()){let i=await u({url:"/Auth/refresh",method:"POST",body:{refreshToken:n}},t,r);if(i.data){let l=i.data,c=(null==l?void 0:l.data)||l,d=null==c?void 0:c.accessToken,m=null==c?void 0:c.refreshToken,f=(null==c?void 0:c.expiresIn)||3600;d&&(o("token",d),m&&o("refreshToken",m),o("tokenExpiry",(Date.now()+1e3*f).toString()),t.dispatch((0,s.vJ)({token:d,refreshToken:m||n,expiresIn:f})),a=await u(e,t,r),console.log("Token refreshed and request retried"))}else console.log("Token refresh failed, logging out..."),l("token"),l("refreshToken"),l("tokenExpiry"),t.dispatch((0,s.Cd)()),window.location.href="/login"}else console.log("No valid refresh token, logging out..."),l("token"),l("refreshToken"),l("tokenExpiry"),t.dispatch((0,s.Cd)()),window.location.href="/login"}return a},f=(0,n.LC)({reducerPath:"api",baseQuery:m,tagTypes:["User","Auth","TravelPlan","Destination","Analytics","Booking","Review","Preference","Notification","Favorites"],endpoints:()=>({})})},37775:function(e,t,r){"use strict";r.d(t,{Fm:function(){return o},R5:function(){return a},XB:function(){return c},X_:function(){return d},aZ:function(){return i},t$:function(){return n},ul:function(){return l},y0:function(){return s}});let{useGetDestinationsQuery:a,useGetDestinationQuery:n,useCreateDestinationMutation:s,useUpdateDestinationMutation:i,useDeleteDestinationMutation:o,useAddFavoriteMutation:l,useRemoveFavoriteMutation:c,useGetFavoritesQuery:d}=r(38059).h.injectEndpoints({endpoints:e=>({getDestinations:e.query({query:()=>"/Destinations",providesTags:["Destination"]}),getDestination:e.query({query:e=>"/Destinations/".concat(e),providesTags:(e,t,r)=>[{type:"Destination",id:r}]}),createDestination:e.mutation({query:e=>({url:"/Destinations",method:"POST",body:e}),invalidatesTags:["Destination"]}),updateDestination:e.mutation({query:e=>{let{id:t,data:r}=e;return{url:"/Destinations/".concat(t),method:"PUT",body:r}},invalidatesTags:(e,t,r)=>{let{id:a}=r;return[{type:"Destination",id:a},"Destination"]}}),deleteDestination:e.mutation({query:e=>({url:"/Destinations/".concat(e),method:"DELETE"}),invalidatesTags:["Destination"]}),addFavorite:e.mutation({query:e=>({url:"/Destinations/".concat(e,"/favorite"),method:"POST"}),invalidatesTags:(e,t,r)=>[{type:"Destination",id:r},"Favorites"]}),removeFavorite:e.mutation({query:e=>({url:"/Destinations/".concat(e,"/favorite"),method:"DELETE"}),invalidatesTags:(e,t,r)=>[{type:"Destination",id:r},"Favorites"]}),getFavorites:e.query({query:()=>"/Destinations/favorites",providesTags:["Favorites"]})})})},37610:function(e,t,r){"use strict";r.d(t,{CG:function(){return s},TL:function(){return n}});var a=r(68575);let n=()=>(0,a.I0)(),s=a.v9}},function(e){e.O(0,[6137,7210,5650,3557,3145,2971,2117,1744],function(){return e(e.s=16763)}),_N_E=e.O()}]);