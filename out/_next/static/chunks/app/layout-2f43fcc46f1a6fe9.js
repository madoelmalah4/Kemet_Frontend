(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{19484:function(e,t,a){Promise.resolve().then(a.t.bind(a,47960,23)),Promise.resolve().then(a.bind(a,3598)),Promise.resolve().then(a.bind(a,59556)),Promise.resolve().then(a.bind(a,30406)),Promise.resolve().then(a.bind(a,86726)),Promise.resolve().then(a.t.bind(a,67331,23)),Promise.resolve().then(a.t.bind(a,63358,23)),Promise.resolve().then(a.bind(a,80818))},3598:function(e,t,a){"use strict";a.d(t,{AppChrome:function(){return j}});var r=a(57437),s=a(2265),n=a(99376),l=a(27648),i=a(92369),o=a(47692),d=a(32489),c=a(58293),u=a(62869),h=a(30406);function m(){var e,t;let[a,m]=(0,s.useState)(!1),x=(0,n.usePathname)(),{isAuthenticated:p,user:v,logout:g,isAdmin:f}=(0,h.a)();return(0,r.jsx)("nav",{className:"sticky top-0 z-50 w-full border-b border-border/60 bg-white/80 backdrop-blur-xl supports-[backdrop-filter]:bg-white/70 shadow-sm",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex h-18 items-center justify-between py-2",children:[(0,r.jsxs)(l.default,{href:"/",className:"flex items-center space-x-3 group",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl overflow-hidden shadow-lg group-hover:shadow-xl transition-all duration-300 bg-center bg-cover",style:{backgroundImage:"url(/logo.png)"}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-display text-xl font-bold text-blue-600",children:"Kemet"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:"Discover Ancient Wonders"})]})]}),(0,r.jsxs)("div",{className:"hidden lg:flex items-center space-x-1",children:[(0,r.jsx)(l.default,{href:"/",className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ".concat("/"===x?"bg-blue-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"),children:"Home"}),(0,r.jsx)(l.default,{href:"/destinations",className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ".concat("/destinations"===x?"bg-blue-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"),children:"Destinations"}),(0,r.jsx)(l.default,{href:"/about",className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ".concat("/about"===x?"bg-blue-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"),children:"About Egypt"}),p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{href:f?"/admin":"/dashboard",className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ".concat("/dashboard"===x||"/admin"===x?"bg-blue-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100 hover:text-blue-600"),children:f?"Admin":"Dashboard"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 ml-4 pl-4 border-l border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-600/20 rounded-full flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("div",{className:"hidden sm:block",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==v?void 0:null===(e=v.name)||void 0===e?void 0:e.split(" ")[0]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Explorer"})]})]}),(0,r.jsx)(u.z,{onClick:g,variant:"outline",size:"sm",className:"hover:bg-red-50 hover:border-red-200 hover:text-red-600",children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})]})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-3 ml-4",children:[(0,r.jsx)(l.default,{href:"/login",children:(0,r.jsx)(u.z,{variant:"ghost",size:"sm",className:"hover:bg-gray-100 text-gray-700",children:"Login"})}),(0,r.jsx)(l.default,{href:"/register",children:(0,r.jsx)(u.z,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-600/20",children:"Get Started"})})]})]}),(0,r.jsx)("button",{className:"lg:hidden rounded-xl p-2.5 hover:bg-gray-100 transition-colors",onClick:()=>m(!a),children:a?(0,r.jsx)(d.Z,{className:"h-6 w-6"}):(0,r.jsx)(c.Z,{className:"h-6 w-6"})})]}),a&&(0,r.jsx)("div",{className:"lg:hidden pb-4",children:(0,r.jsxs)("div",{className:"glass-card rounded-2xl p-4 space-y-2",children:[(0,r.jsx)(l.default,{href:"/",className:"block rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200 ".concat("/"===x?"bg-blue-600 text-white":"text-gray-800 hover:bg-gray-100"),onClick:()=>m(!1),children:"Home"}),(0,r.jsx)(l.default,{href:"/destinations",className:"block rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200 ".concat("/destinations"===x?"bg-blue-600 text-white":"text-gray-800 hover:bg-gray-100"),onClick:()=>m(!1),children:"Destinations"}),(0,r.jsx)(l.default,{href:"/about",className:"block rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200 ".concat("/about"===x?"bg-blue-600 text-white":"text-gray-800 hover:bg-gray-100"),onClick:()=>m(!1),children:"About Egypt"}),p?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-2 mt-2",children:[(0,r.jsx)(l.default,{href:f?"/admin":"/dashboard",className:"block rounded-xl px-4 py-3 text-sm font-medium transition-all duration-200 ".concat("/dashboard"===x||"/admin"===x?"bg-blue-600 text-white":"text-gray-800 hover:bg-gray-100"),onClick:()=>m(!1),children:f?"Admin":"Dashboard"}),(0,r.jsx)("div",{className:"flex items-center justify-between px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-600/20 rounded-full flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==v?void 0:null===(t=v.name)||void 0===t?void 0:t.split(" ")[0]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Explorer"})]})]})}),(0,r.jsxs)(u.z,{variant:"outline",className:"w-full hover:bg-red-50 hover:border-red-200 hover:text-red-600",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-2"})," Logout"]})]})}):(0,r.jsxs)("div",{className:"space-y-2 border-t border-gray-200 pt-2 mt-2",children:[(0,r.jsx)(l.default,{href:"/login",className:"block",onClick:()=>m(!1),children:(0,r.jsx)(u.z,{variant:"outline",className:"w-full hover:bg-gray-100 text-gray-700",children:"Login"})}),(0,r.jsx)(l.default,{href:"/register",className:"block",onClick:()=>m(!1),children:(0,r.jsx)(u.z,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Get Started"})})]})]})})]})})}var x=a(89345),p=a(13041),v=a(83774),g=a(79219),f=a(42351),y=a(37760);function b(){return(0,r.jsxs)("footer",{className:"relative bg-gray-950 text-gray-300",children:[(0,r.jsx)("div",{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-egyptian-gold/60 to-transparent"}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-14",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-white font-semibold text-lg mb-4 font-display",children:"Egypt Explorer"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 leading-relaxed",children:"Your trusted companion for discovering the wonders of Egypt. Plan, explore, and experience the magic of ancient civilization."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-white font-semibold text-lg mb-4",children:"Quick Links"}),(0,r.jsxs)("ul",{className:"space-y-2",children:[(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/destinations",className:"text-sm hover:text-egyptian-gold transition-colors",children:"Destinations"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/about",className:"text-sm hover:text-egyptian-gold transition-colors",children:"About Egypt"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/dashboard",className:"text-sm hover:text-egyptian-gold transition-colors",children:"Plan Your Trip"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/dashboard/vr-tours",className:"text-sm hover:text-egyptian-gold transition-colors",children:"VR Tours"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-white font-semibold text-lg mb-4",children:"Contact"}),(0,r.jsxs)("ul",{className:"space-y-3",children:[(0,r.jsxs)("li",{className:"flex items-center space-x-2 text-sm",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{children:"info@egyptexplorer.com"})]}),(0,r.jsxs)("li",{className:"flex items-center space-x-2 text-sm",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{children:"+20 2 1234 5678"})]}),(0,r.jsxs)("li",{className:"flex items-center space-x-2 text-sm",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{children:"Cairo, Egypt"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-white font-semibold text-lg mb-4",children:"Follow Us"}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("a",{href:"#",className:"rounded-xl p-2 hover:bg-white/5 hover:text-egyptian-gold transition-colors",children:(0,r.jsx)(g.Z,{className:"h-5 w-5"})}),(0,r.jsx)("a",{href:"#",className:"rounded-xl p-2 hover:bg-white/5 hover:text-egyptian-gold transition-colors",children:(0,r.jsx)(f.Z,{className:"h-5 w-5"})}),(0,r.jsx)("a",{href:"#",className:"rounded-xl p-2 hover:bg-white/5 hover:text-egyptian-gold transition-colors",children:(0,r.jsx)(y.Z,{className:"h-5 w-5"})})]})]})]}),(0,r.jsx)("div",{className:"border-t border-white/10 mt-10 pt-8 text-center text-sm text-gray-400",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Egypt Explorer. All rights reserved."]})})]})]})}function j(e){let{children:t}=e,[a,l]=(0,s.useState)(!1),i=(0,n.usePathname)();return((0,s.useEffect)(()=>{l(!0)},[]),a)?i.startsWith("/admin")||i.startsWith("/dashboard")?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsxs)("div",{className:"app-surface flex min-h-screen flex-col",children:[(0,r.jsx)(m,{}),(0,r.jsx)("main",{className:"flex-1",children:t}),(0,r.jsx)(b,{})]}):null}},59556:function(e,t,a){"use strict";a.d(t,{Toaster:function(){return g}});var r=a(57437),s=a(2265),n=a(84602),l=a(90535),i=a(32489),o=a(94508);let d=n.zt,c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.l_,{ref:t,className:(0,o.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...s})});c.displayName=n.l_.displayName;let u=(0,l.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),h=s.forwardRef((e,t)=>{let{className:a,variant:s,...l}=e;return(0,r.jsx)(n.fC,{ref:t,className:(0,o.cn)(u({variant:s}),a),...l})});h.displayName=n.fC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aU,{ref:t,className:(0,o.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...s})}).displayName=n.aU.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.x8,{ref:t,className:(0,o.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...s,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=n.x8.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-sm font-semibold",a),...s})});x.displayName=n.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm opacity-90",a),...s})});p.displayName=n.dk.displayName;var v=a(77992);function g(){let{toasts:e}=(0,v.pm)();return(0,r.jsxs)(d,{children:[e.map(function(e){let{id:t,title:a,description:s,action:n,...l}=e;return(0,r.jsxs)(h,{...l,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[a&&(0,r.jsx)(x,{children:a}),s&&(0,r.jsx)(p,{children:s})]}),n,(0,r.jsx)(m,{})]},t)}),(0,r.jsx)(c,{})]})}},77992:function(e,t,a){"use strict";a.d(t,{pm:function(){return h}});var r=a(2265);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function h(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},30406:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return u},a:function(){return h}});var r=a(57437),s=a(2265),n=a(68575);let l=()=>(0,n.I0)(),i=n.v9;var o=a(46102),d=a(72218);let c=(0,s.createContext)(void 0);function u(e){var t,a;let{children:n}=e,u=i(e=>e.auth),h=l(),[m]=(0,o.YA)(),[x]=(0,o._y)(),[p]=(0,o.ru)();(0,s.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("refreshToken");!e&&t&&p({refreshToken:t}).catch(()=>{})},[p]),(0,s.useEffect)(()=>{let e=async()=>{let e=localStorage.getItem("tokenExpiry"),t=localStorage.getItem("refreshToken");if(!e||!t)return;let a=parseInt(e,10);if(Date.now()>=a-12e4){console.log("Token expiring soon or expired, attempting refresh...");try{await p({refreshToken:t}).unwrap(),console.log("Periodic refresh successful")}catch(e){console.log("Periodic refresh failed, session truly expired"),g()}}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[p]);let v=async(e,t)=>{try{return await m({email:e,password:t}).unwrap(),!0}catch(e){return!1}},g=async()=>{h((0,d.Cd)()),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("user");try{let e=u.refreshToken||localStorage.getItem("refreshToken");e&&await x({refreshToken:e}).unwrap()}catch(e){}window.location.href="/login"},f={user:u.user,login:v,logout:g,isAuthenticated:u.isAuthenticated,isAdmin:(null===(t=u.user)||void 0===t?void 0:t.role)==="admin",isTourist:(null===(a=u.user)||void 0===a?void 0:a.role)==="tourist"};return(0,r.jsx)(c.Provider,{value:f,children:n})}function h(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},86726:function(e,t,a){"use strict";a.d(t,{TravelPlanProvider:function(){return o},H:function(){return d}});var r=a(57437),s=a(2265);let n=[{id:"plan-1",userId:"tourist-1",name:"10-Day Egyptian Adventure",startDate:"2026-03-15",endDate:"2026-03-25",budget:2500,status:"confirmed",days:[{dayNumber:1,date:"2026-03-15",activities:[{id:"act-1",destinationId:"1",activityId:"a1",startTime:"09:00",endTime:"12:00",notes:"Book tickets in advance"},{id:"act-2",destinationId:"1",activityId:"a2",startTime:"14:00",endTime:"15:30",notes:"Bring sunscreen and water"}],accommodation:{name:"Marriott Mena House",location:"Giza",checkIn:"2026-03-15T15:00:00Z",checkOut:"2026-03-17T12:00:00Z"},notes:"First day in Cairo - take it easy"},{dayNumber:2,date:"2026-03-16",activities:[{id:"act-3",destinationId:"1",activityId:"a3",startTime:"19:00",endTime:"20:30",notes:"Sound and Light show at pyramids"}],notes:"Rest day with evening show"},{dayNumber:3,date:"2026-03-17",activities:[],accommodation:{name:"Steigenberger Nile Palace",location:"Luxor",checkIn:"2026-03-17T15:00:00Z",checkOut:"2026-03-20T12:00:00Z"},notes:"Travel day to Luxor"}],createdAt:"2026-01-15T14:30:00Z",updatedAt:"2026-01-20T09:15:00Z"}];var l=a(10543);let i=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(n[0]||null),[u,{isLoading:h}]=(0,l.JV)(),m=async e=>{try{let t=await u(e).unwrap();c(t),console.log("Travel plan created:",t)}catch(e){console.error("Failed to create travel plan:",e)}};return(0,r.jsx)(i.Provider,{value:{travelPlan:d,preferences:a,setPreferences:e=>{o(e),console.log("Preferences saved:",e)},updateTravelPlan:e=>{c(e),console.log("Travel plan updated:",e)},createTravelPlan:m},children:t})}function d(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useTravelPlanContext must be used within a TravelPlanProvider");return e}},80818:function(e,t,a){"use strict";a.d(t,{ReduxProvider:function(){return m}});var r=a(57437),s=a(68575),n=a(59688),l=a(39129),i=a(79523),o=a(38059),d=a(72218),c=a(10543);let u=(0,n.UY)({auth:d.ZP,travelPlan:c.ZP,[o.h.reducerPath]:o.h.reducer}),h=(0,l.xC)({reducer:u,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE","persist/REGISTER","persist/FLUSH","persist/PAUSE","persist/PURGE"],ignoredPaths:[o.h.reducerPath]}}).concat(o.h.middleware),devTools:!1});function m(e){let{children:t}=e;return(0,r.jsx)(s.zt,{store:h,children:t})}(0,i.sj)(h.dispatch)},10543:function(e,t,a){"use strict";a.d(t,{JV:function(){return o}});var r=a(38059),s=a(39129);let n=r.h.injectEndpoints({endpoints:e=>({getTravelPlans:e.query({query:()=>"/travel-plans",providesTags:["TravelPlan"]}),getTravelPlan:e.query({query:e=>"/travel-plans/".concat(e),providesTags:(e,t,a)=>[{type:"TravelPlan",id:a}]}),createTravelPlan:e.mutation({query:e=>({url:"/travel-plans",method:"POST",body:e}),invalidatesTags:["TravelPlan"]}),updateTravelPlan:e.mutation({query:e=>{let{id:t,data:a}=e;return{url:"/travel-plans/".concat(t),method:"PUT",body:a}},invalidatesTags:(e,t,a)=>{let{id:r}=a;return[{type:"TravelPlan",id:r}]}}),deleteTravelPlan:e.mutation({query:e=>({url:"/travel-plans/".concat(e),method:"DELETE"}),invalidatesTags:["TravelPlan"]}),addActivity:e.mutation({query:e=>{let{planId:t,dayId:a,activity:r}=e;return{url:"/travel-plans/".concat(t,"/days/").concat(a,"/activities"),method:"POST",body:r}},invalidatesTags:(e,t,a)=>{let{planId:r}=a;return[{type:"TravelPlan",id:r}]}}),updateActivity:e.mutation({query:e=>{let{planId:t,dayId:a,activityId:r,data:s}=e;return{url:"/travel-plans/".concat(t,"/days/").concat(a,"/activities/").concat(r),method:"PUT",body:s}},invalidatesTags:(e,t,a)=>{let{planId:r}=a;return[{type:"TravelPlan",id:r}]}}),deleteActivity:e.mutation({query:e=>{let{planId:t,dayId:a,activityId:r}=e;return{url:"/travel-plans/".concat(t,"/days/").concat(a,"/activities/").concat(r),method:"DELETE"}},invalidatesTags:(e,t,a)=>{let{planId:r}=a;return[{type:"TravelPlan",id:r}]}}),generateTravelPlan:e.mutation({query:e=>({url:"/travel-plans/generate",method:"POST",body:e}),invalidatesTags:["TravelPlan"]}),getTravelSuggestions:e.query({query:e=>{let{preferences:t}=e;return{url:"/travel-plans/suggestions",method:"POST",body:t}}}),exportTravelPlan:e.mutation({query:e=>{let{id:t,format:a}=e;return{url:"/travel-plans/".concat(t,"/export?format=").concat(a),method:"GET",responseHandler:e=>e.blob()}}}),shareTravelPlan:e.mutation({query:e=>{let{id:t,permissions:a}=e;return{url:"/travel-plans/".concat(t,"/share"),method:"POST",body:{permissions:a}}}}),duplicateTravelPlan:e.mutation({query:e=>({url:"/travel-plans/".concat(e,"/duplicate"),method:"POST"}),invalidatesTags:["TravelPlan"]})})}),{useGetTravelPlansQuery:l,useGetTravelPlanQuery:i,useCreateTravelPlanMutation:o,useUpdateTravelPlanMutation:d,useDeleteTravelPlanMutation:c,useAddActivityMutation:u,useUpdateActivityMutation:h,useDeleteActivityMutation:m,useGenerateTravelPlanMutation:x,useGetTravelSuggestionsQuery:p,useExportTravelPlanMutation:v,useShareTravelPlanMutation:g,useDuplicateTravelPlanMutation:f}=n,y=(0,s.oM)({name:"travelPlan",initialState:{plans:[],currentPlan:null,isLoading:!1,error:null},reducers:{setCurrentPlan:(e,t)=>{e.currentPlan=t.payload},setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload},clearError:e=>{e.error=null},addPlan:(e,t)=>{e.plans.push(t.payload)},updatePlan:(e,t)=>{var a;let r=e.plans.findIndex(e=>e.id===t.payload.id);-1!==r&&(e.plans[r]=t.payload),(null===(a=e.currentPlan)||void 0===a?void 0:a.id)===t.payload.id&&(e.currentPlan=t.payload)},removePlan:(e,t)=>{var a;e.plans=e.plans.filter(e=>e.id!==t.payload),(null===(a=e.currentPlan)||void 0===a?void 0:a.id)===t.payload&&(e.currentPlan=null)}},extraReducers:e=>{e.addMatcher(n.endpoints.getTravelPlans.matchPending,e=>{e.isLoading=!0,e.error=null}).addMatcher(n.endpoints.getTravelPlans.matchFulfilled,(e,t)=>{e.isLoading=!1,e.plans=t.payload}).addMatcher(n.endpoints.getTravelPlans.matchRejected,(e,t)=>{var a;e.isLoading=!1,e.error=(null===(a=t.error)||void 0===a?void 0:a.message)||"Failed to fetch travel plans"}).addMatcher(n.endpoints.getTravelPlan.matchFulfilled,(e,t)=>{e.currentPlan=t.payload}).addMatcher(n.endpoints.createTravelPlan.matchFulfilled,(e,t)=>{e.plans.push(t.payload),e.currentPlan=t.payload}).addMatcher(n.endpoints.updateTravelPlan.matchFulfilled,(e,t)=>{y.caseReducers.updatePlan(e,t)}).addMatcher(n.endpoints.deleteTravelPlan.matchFulfilled,(e,t)=>{var a;let r=t.meta.arg.originalArgs;e.plans=e.plans.filter(e=>e.id!==r),(null===(a=e.currentPlan)||void 0===a?void 0:a.id)===r&&(e.currentPlan=null)})}}),{setCurrentPlan:b,setLoading:j,setError:N,clearError:T,addPlan:w,updatePlan:P,removePlan:E}=y.actions;t.ZP=y.reducer},47960:function(){}},function(e){e.O(0,[2932,6137,5650,3557,7489,2846,4236,2971,2117,1744],function(){return e(e.s=19484)}),_N_E=e.O()}]);